<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-width, initial-scale=1.0" /> <title>Settings - AI Character</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

</head>

<body class="light-mode settings-page">

    <div id="app">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <h1>Settings</h1>
                <nav class="header-actions" aria-label="Help">
                    <button id="settings-help-btn" class="icon-btn" aria-label="Help">
                        <i class="fas fa-question-circle" aria-hidden="true"></i>
                    </button>
                </nav>
            </div>
        <!-- Tab Navigation -->
        <nav class="tab-menu" role="tablist">
            <button class="tab-btn active" data-tab="general" role="tab" aria-selected="true">General</button>
            <button class="tab-btn" data-tab="appearance" role="tab" aria-selected="false">Appearance</button>
            <button class="tab-btn" data-tab="audio" role="tab" aria-selected="false">Audio</button>
        </nav>
        </header>

        <!-- Main Content -->
        <main>
            <div id="settings-container" class="settings-container" role="tabpanel">
                <!-- General Settings Section -->
                <section id="general" class="settings-section active" role="region" aria-labelledby="general-heading">
                    <h2 id="general-heading" class="sr-only">General Settings</h2>

                    <div class="settings-group">
                        <h3>Application</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-globe" aria-hidden="true"></i>
                                <label for="language-select">Language</label>
                            </div>
                            <div class="setting-control">
                                <select id="language-select" aria-label="Select language">
                                    <option value="en">English</option>
                                    <option value="id">Indonesian</option>
                                    <option value="ja">Japanese</option>
                                    <option value="zh">Chinese</option>
                                    <option value="es">Spanish</option>
                                    <option value="fr">French</option>
                                </select>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-hand-pointer" aria-hidden="true"></i>
                                <label for="swipe-gestures">Swipe Gestures</label>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="swipe-gestures" checked />
                                    <span class="slider round" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-compact-disc" aria-hidden="true"></i>
                                <label for="animations">Animations</label>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="animations" checked />
                                    <span class="slider round" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>AI Settings</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-microchip" aria-hidden="true"></i>
                                <label for="default-model">Default AI Model</label>
                            </div>
                            <div class="setting-control">
                                <select id="default-model" aria-label="Select default AI model">
                                    <optgroup label="Model Custom">
                                        <option value="Albert">Albert (Lokal)</option>
                                        <option value="Bert-Tinny">Bert Tinny (Lokal)</option>
                                        <option value="Distil-bert">Distil bert (Lokal)</option>
                                        <option value="Distil-Gpt2">Distil GPT-2 (Lokal)</option>
                                        <option value="Gpt-Neo">GPT Neo (Lokal)</option>
                                        <option value="Gpt2">GPT-2 (Lokal)</option>
                                        <option value="T5-Small">T5 Small (Lokal)</option>
                                        <option value="Tinny-Llma">Tinny Llma (Lokal)</option>
                                    </optgroup>
                                    <optgroup label="Model API key">
                                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo (API)</option>
                                        <option value="gpt-4">GPT-4 (API)</option>
                                        <option value="claude-3-opus">Claude 3 Opus (API)</option>
                                        <option value="llama-3">Llama 3 (API)</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-key" aria-hidden="true"></i>
                                <label for="api-key-input">API Key</label>
                            </div>
                            <div class="setting-control">
                                <input type="password" id="api-key-input" placeholder="Enter OpenRouter API Key" />
                                <button id="save-api-key" class="small-btn">Save</button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-server" aria-hidden="true"></i>
                                <label for="api-endpoint">API Endpoint</label>
                            </div>
                            <div class="setting-control">
                                <input type="text" id="api-endpoint" value="https://openrouter.ai/api/v1/chat/completions" />
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Content</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
                                <label for="nsfw-toggle-global">NSFW Content</label>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="nsfw-toggle-global" />
                                    <span class="slider round" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-shield-alt" aria-hidden="true"></i>
                                <label for="safety-level">Safety Filters</label>
                            </div>
                            <div class="setting-control">
                                <select id="safety-level" aria-label="Select safety filter level">
                                    <option value="high">High</option>
                                    <option value="medium" selected>Moderate</option>
                                    <option value="low">Low</option>
                                    <option value="off">Off</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Appearance Settings Section -->
                <section id="appearance" class="settings-section" role="region" aria-labelledby="appearance-heading">
                    <h2 id="appearance-heading" class="sr-only">Appearance Settings</h2>

                    <div class="settings-group">
                        <h3>Theme</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-moon" aria-hidden="true"></i>
                                <label for="dark-mode-toggle">Dark Mode</label>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="dark-mode-toggle" />
                                    <span class="slider round" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                        <div class="theme-select">
                            <h4>Color Theme</h4>
                            <div class="theme-options" role="group" aria-label="Color Themes">
                                <div class="theme-option active" data-theme="default">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #25D366, #128C7E);"></div>
                                    <span>Default</span>
                                </div>
                                <div class="theme-option" data-theme="blue">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #4F8EF7, #1A56DB);"></div>
                                    <span>Blue</span>
                                </div>
                                <div class="theme-option" data-theme="purple">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #A78BFA, #7C3AED);"></div>
                                    <span>Purple</span>
                                </div>
                                <div class="theme-option" data-theme="pink">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #EC4899, #BE185D);"></div>
                                    <span>Pink</span>
                                </div>
                                <div class="theme-option" data-theme="custom">
                                    <div class="theme-preview custom-theme">
                                        <i class="fas fa-plus" aria-hidden="true"></i>
                                    </div>
                                    <span>Custom</span>
                                </div>
                            </div>
                        </div>
                        <div id="custom-theme-section" class="setting-item hidden">
                            <div class="color-picker-group">
                                <label for="primary-color">Primary Color</label>
                                <input type="color" id="primary-color" value="#25D366" />
                            </div>
                            <div class="color-picker-group">
                                <label for="secondary-color">Secondary Color</label>
                                <input type="color" id="secondary-color" value="#128C7E" />
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Chat Appearance</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-font" aria-hidden="true"></i>
                                <label for="font-family">Font</label>
                            </div>
                            <div class="setting-control">
                                <select id="font-family" aria-label="Select font family">
                                    <option value="system-ui">System Default</option>
                                    <option value="'Segoe UI', sans-serif">Segoe UI</option>
                                    <option value="'Roboto', sans-serif">Roboto</option>
                                    <option value="'Open Sans', sans-serif">Open Sans</option>
                                    <option value="'Nunito', sans-serif">Nunito</option>
                                </select>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-text-height" aria-hidden="true"></i>
                                <label for="font-size">Font Size</label>
                            </div>
                            <div class="setting-control">
                                <div class="slider-container">
                                    <input type="range" id="font-size" min="12" max="20" value="16" aria-label="Adjust font size" />
                                    <span id="font-size-value">16px</span>
                                </div>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-image" aria-hidden="true"></i>
                                <label for="change-bg-btn">Chat Background</label>
                            </div>
                            <div class="setting-control">
                                <button id="change-bg-btn" class="small-btn">Change</button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Bubbles Style</h3>
                        <div class="bubble-styles" role="group" aria-label="Bubble Styles">
                            <div class="bubble-style active" data-style="rounded">
                                <div class="bubble-preview rounded"></div>
                                <span>Rounded</span>
                            </div>
                            <div class="bubble-style" data-style="sharp">
                                <div class="bubble-preview sharp"></div>
                                <span>Sharp</span>
                            </div>
                            <div class="bubble-style" data-style="tail">
                                <div class="bubble-preview tail"></div>
                                <span>Tailed</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Audio Settings Section -->
                <section id="audio" class="settings-section" role="region" aria-labelledby="audio-heading">
                    <h2 id="audio-heading" class="sr-only">Audio Settings</h2>

                    <div class="settings-group">
                        <h3>Sound Effects</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-volume-up" aria-hidden="true"></i>
                                <label for="ui-sounds">UI Sounds</label>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="ui-sounds" checked />
                                    <span class="slider round" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-bell" aria-hidden="true"></i>
                                <label for="notification-sounds">Notification Sounds</label>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="notification-sounds" checked />
                                    <span class="slider round" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-volume-down" aria-hidden="true"></i>
                                <label for="volume-slider">Volume</label>
                            </div>
                            <div class="setting-control">
                                <div class="slider-container">
                                    <input type="range" id="volume-slider" min="0" max="100" value="70" aria-label="Adjust volume" />
                                    <span id="volume-value">70%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Text-to-Speech</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-comment-alt" aria-hidden="true"></i>
                                <label for="auto-tts">Auto TTS</label>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="auto-tts" checked />
                                    <span class="slider round" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-microphone" aria-hidden="true"></i>
                                <label for="voice-select">Voice</label>
                            </div>
                            <div class="setting-control">
                                <select id="voice-select" aria-label="Select voice">
                                    <option value="default">Default</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-tachometer-alt" aria-hidden="true"></i>
                                <label for="speech-rate">Speech Rate</label>
                            </div>
                            <div class="setting-control">
                                <div class="slider-container">
                                    <input type="range" id="speech-rate" min="0.5" max="2" step="0.1" value="1" aria-label="Adjust speech rate" />
                                    <span id="rate-value">1x</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Music Player</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <i class="fas fa-music" aria-hidden="true"></i>
                                <label for="bg-music">Background Music</label>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="bg-music" />
                                    <span class="slider round" aria-hidden="true"></span>
                                </label>
                            </div>
                        </div>
                        <div id="music-player" class="music-player hidden" role="group" aria-label="Music Controls">
                            <div class="music-controls">
                                <button id="prev-track" class="music-btn" aria-label="Previous track">
                                    <i class="fas fa-step-backward" aria-hidden="true"></i>
                                </button>
                                <button id="play-pause" class="music-btn" aria-label="Play or pause">
                                    <i class="fas fa-play" aria-hidden="true"></i>
                                </button>
                                <button id="next-track" class="music-btn" aria-label="Next track">
                                    <i class="fas fa-step-forward" aria-hidden="true"></i>
                                </button>
                            </div>
                            <div class="track-info">
                                <span id="track-name">No track selected</span>
                                <div class="slider-container">
                                    <input type="range" id="music-volume" min="0" max="100" value="50" aria-label="Adjust music volume" />
                                    <span id="music-volume-value">50%</span>
                                </div>
                            </div>
                        </div>
                        <button id="add-music" class="outline-btn hidden" aria-label="Add music files">
                            <i class="fas fa-plus" aria-hidden="true"></i> Add Music Files
                        </button>
                    </div>
                </section>
            </div>
        </main>

        <!-- Background Modal -->
        <div id="bg-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="bg-modal-title">
            <div class="modal-content">
                <header class="modal-header">
                    <h3 id="bg-modal-title">Chat Background</h3>
                    <button id="close-bg-modal" class="close-btn" aria-label="Close modal">
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>
                </header>
                <div class="modal-body">
                    <div class="bg-options" role="group" aria-label="Background options">
                        <div class="bg-option active" data-bg="default">
                            <div class="bg-preview default"></div>
                            <span>Default</span>
                        </div>
                        <div class="bg-option" data-bg="gradient1">
                            <div class="bg-preview gradient1"></div>
                            <span>Gradient 1</span>
                        </div>
                        <div class="bg-option" data-bg="gradient2">
                            <div class="bg-preview gradient2"></div>
                            <span>Gradient 2</span>
                        </div>
                        <div class="bg-option" data-bg="pattern1">
                            <div class="bg-preview pattern1"></div>
                            <span>Pattern 1</span>
                        </div>
                        <div class="bg-option" data-bg="custom">
                            <div class="bg-preview custom">
                                <i class="fas fa-image" aria-hidden="true"></i>
                            </div>
                            <span>Custom</span>
                        </div>
                    </div>
                    <div id="custom-bg-upload" class="hidden" role="group" aria-label="Upload background image">
                        <label for="bg-upload" class="upload-btn">
                            <i class="fas fa-upload" aria-hidden="true"></i>
                            <span>Upload Image</span>
                        </label>
                        <input type="file" id="bg-upload" accept="image/*" hidden />
                    </div>
                </div>
                <footer class="modal-footer">
                    <button id="save-bg" class="primary-btn">Apply</button>
                </footer>
            </div>
        </div>

        <!-- Help Modal -->
        <div id="help-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="help-modal-title">
            <div class="modal-content">
                <header class="modal-header">
                    <h3 id="help-modal-title">Help & Tips</h3>
                    <button id="close-help-modal" class="close-btn" aria-label="Close help modal">
                        <i class="fas fa-times" aria-hidden="true"></i>
                    </button>
                </header>
                <div class="modal-body">
                    <div class="help-section">
                        <h4><i class="fas fa-info-circle" aria-hidden="true"></i> About</h4>
                        <p>Welcome to AI Character Chat! This app allows you to create and chat with custom AI characters using state-of-the-art language models.</p>
                    </div>
                    <div class="help-section">
                        <h4><i class="fas fa-lightbulb" aria-hidden="true"></i> Tips</h4>
                        <ul>
                            <li>Long-press on any message to edit or delete it</li>
                            <li>Use swipe gestures to navigate between chats</li>
                            <li>Customize your experience in the Settings page</li>
                            <li>Create detailed character profiles for better interactions</li>
                            <li>Use the microphone button for voice input</li>
                        </ul>
                    </div>
                    <div class="help-section">
                        <h4><i class="fas fa-key" aria-hidden="true"></i> API Setup</h4>
                        <p>To use custom AI models, you need to provide your own API key. We support OpenRouter as the default API provider.</p>
                        <ol>
                            <li>Get an API key from <a href="#" class="link">OpenRouter</a></li>
                            <li>Enter your API key in Settings > General > AI Settings</li>
                            <li>Choose your preferred model for each character</li>
                        </ol>
                    </div>
                </div>
                <footer class="modal-footer">
                    <button id="close-help" class="primary-btn">Got it</button>
                </footer>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav" role="navigation" aria-label="Main navigation">
            <a href="index.html" class="nav-item">
                <i class="fas fa-comment" aria-hidden="true"></i>
                <span>Chats</span>
            </a>
            <a href="character.html" class="nav-item">
                <i class="fas fa-users" aria-hidden="true"></i>
                <span>Characters</span>
            </a>
            <a href="settings.html" class="nav-item active" aria-current="page">
                <i class="fas fa-gear" aria-hidden="true"></i>
                <span>Settings</span>
            </a>
            <a href="profile.html" class="nav-item">
                <i class="fas fa-user" aria-hidden="true"></i>
                <span>Profile</span>
            </a>
        </nav>

        <div id="overlay" class="overlay hidden" aria-hidden="true"></div>
    </div>

    <audio id="background-music" loop preload="auto">
        <source src="/music/default-track.mp3" type="audio/mpeg">
    </audio>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="js/api.js"></script>
    <script type="module" src="js/navigation.js"></script>
    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/musicPlayer.js"></script>
    <script type="module" src="js/settings.js"></script>


</body>
</html>